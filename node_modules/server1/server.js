// all users
const { randomUUID } = require('crypto');
import { v4 as uuidv4 } from 'uuid';
uuidv4(); // 
const express = require('express');
const app = express();
// // let data=require("./data")
let data=[
    { id: 1, name: "avi", last: "cohen" },
    { id: 2, name: "asi", last: "cohen" },
    { id: 3, name: "afi", last: "cohen" },
];
const port = 3000;
function allUsers(){
    console.log("kk")
    app.use(express.json())
app.use(express.json());
app.get("/users", (req, res) => {
    res.send(JSON.stringify(data))
    // console.log(data)
})
}
allUsers()
// by id
function byId(){
    app.use(express.json())
app.get('/users/id', (req, res) => {
    const userId = req.params.id;
    data.forEach(element => {
        if(userId==element.id){
            res.send(JSON.stringify(element))
        }
    })
})
}
byId()
// creat new user
function newUser(){
    app.use(express.json())
app.post('/new', (req, res) => {
      const newUser = req.body;
      newUser.id=uuidv4()
      data.push(newUser);
      res.status(201).json(newUser);
  });
}
newUser()
//   update user
function updateUser(){
    app.use(express.json())
    console.log("kkk")
app.put("/newusers",(req,res)=>{
    const uId=req.body
    data.forEach(element => {
        if(element.id==uId.id){
            element.id=uId.id
            element.name=uId.name
            element.last=uId.last
            console.log(j)
            console.log("kkkl")
        }
    })
})
}
updateUser()
// delet user
function deleteUser(){
    app.delete("/deleteuser/id",(req,res)=>{
        const dUser=req.body
        data = data.filter(user => user.id != dUser);
    })
}
deleteUser()
app.listen(port,()=>{

})
